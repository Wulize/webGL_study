<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" lang="en">
    <title>导入外部模型</title>
    <style>
        body {
            margin: 0;
        }
        
        canvas {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <script src="./three.js"></script>
    <script src="../node_modules/three/examples/js/loaders/OBJLoader.js"></script>
    <script>
        let manager = new THREE.LoadingManager();
        let loader = new THREE.OBJLoader(manager)
        init();
        animate();
        var scene, camera, renderer;

        //初始化
        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 250;
            var directionalLight = new THREE.DirectionalLight(0xffeedd);
            directionalLight.position.set(0, 0, 1);
            scene.add(directionalLight);
            renderer = new THREE.WebGLRenderer();
            //下面setSize()可以不写，画面也会显示默认指定300*150的大小，很小。所以肯定要手动设定一下大小
            renderer.setSize(window.innerWidth, window.innerHeight);
            //别忘记了这个要写滴...不然就真看不见画面。
            document.body.appendChild(renderer.domElement);

            //开始模型导入的一些工作
            //我们看看官方提供的OBJLoad.js脚本的构造函数
            // this.path = 'D:/前端学习笔记/webGL学习/学习代码';
            var onLoad = function(object) {
                    console.log(111);
                    scene.add(object);
                }
                //加载过程，可以显示进度值
            var onProgress = function(xhr) {
                if (xhr.lengthComputable) {
                    var percentComplete = xhr.loaded / xhr.total * 100;
                    console.log(Math.round(percentComplete, 2) + '% downloaded');
                }
            };
            //错误回调，因为网页调试有报错，这里可以不做处理
            var onError = function(xhr) {};
            //回调写好了，现在可以用加载的方法加载模型了。
            loader.load('D:/前端学习笔记/webGL学习/学习代码/earth.obj', onLoad, onProgress, onError);
        }
        // 渲染
        function render() {
            renderer.render(scene, camera);
        }
        //循环渲染
        function animate() {
            requestAnimationFrame(animate);
            render();
        }
    </script>
</body>

</html>